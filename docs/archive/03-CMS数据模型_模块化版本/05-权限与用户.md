# 05 - æƒé™ä¸ç”¨æˆ·æ¨¡å‹

> **é˜…è¯»æ—¶é—´**: 5 åˆ†é’Ÿ  
> **é€‚ç”¨å¯¹è±¡**: åç«¯å¼€å‘å·¥ç¨‹å¸ˆ

---

## ğŸ” User & Role (ç”¨æˆ·æƒé™)

```typescript
// keystone/schemas/User.ts
export const User = list({
  fields: {
    name: text({ validation: { isRequired: true } }),
    email: text({ isIndexed: 'unique', validation: { isRequired: true } }),
    password: password(),
    
    // è§’è‰²
    role: relationship({ ref: 'Role.users' }),
    
    // çŠ¶æ€
    isActive: checkbox({ defaultValue: true }),
  },
  
  access: {
    operation: {
      query: () => true,
      create: ({ session }) => !!session,
      update: ({ session, item }) => {
        return session?.data.role === 'ADMIN' || session?.data.id === item.id
      },
      delete: ({ session }) => session?.data.role === 'ADMIN',
    }
  }
})

// keystone/schemas/Role.ts
export const Role = list({
  fields: {
    name: text({ validation: { isRequired: true } }),
    
    // æƒé™é…ç½®
    canManageContent: checkbox({ defaultValue: false }),
    canManageMedia: checkbox({ defaultValue: false }),
    canManageUsers: checkbox({ defaultValue: false }),
    canManageSettings: checkbox({ defaultValue: false }),
    canViewAnalytics: checkbox({ defaultValue: false }),
    
    users: relationship({ ref: 'User.role', many: true }),
  }
})
```

---


---

**è¿”å›**: [README.md](./README.md)
