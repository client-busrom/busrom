# 02 - å¤šè¯­è¨€æ–¹æ¡ˆ

> **é˜…è¯»æ—¶é—´**: 15 åˆ†é’Ÿ
> **é€‚ç”¨å¯¹è±¡**: åç«¯å¼€å‘å·¥ç¨‹å¸ˆ

---

## ğŸ—‚ï¸ å¤šè¯­è¨€æ–¹æ¡ˆæ¦‚è§ˆ

æœ¬é¡¹ç›®é‡‡ç”¨ **æ··åˆå¤šè¯­è¨€æ–¹æ¡ˆ**ï¼Œæ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©æœ€é€‚åˆçš„å®ç°æ–¹å¼ï¼š

### æ–¹æ¡ˆ 1: JSON å­—æ®µæ–¹æ¡ˆ
é€‚ç”¨äºï¼š**çŸ­æ–‡æœ¬å­—æ®µ**ï¼ˆname, shortDescription ç­‰ï¼‰
- âœ… æ‰€æœ‰ 24 ç§è¯­è¨€åœ¨åŒä¸€è¡¨å•ä¸­ç¼–è¾‘
- âœ… ç»Ÿä¸€çš„å¤šè¯­è¨€ç¼–è¾‘å™¨ç•Œé¢
- âœ… ä¸€é”® AI ç¿»è¯‘æ‰€æœ‰è¯­è¨€

### æ–¹æ¡ˆ 2: å…³ç³»è¡¨æ–¹æ¡ˆï¼ˆä¸»è¡¨ + ç¿»è¯‘è¡¨ï¼‰
é€‚ç”¨äºï¼š**å¯Œæ–‡æœ¬å†…å®¹**ï¼ˆcontent, contentBody ç­‰ï¼‰
- âœ… æ¯ä¸ªè¯­è¨€ç‹¬ç«‹ç¼–è¾‘ï¼Œå®Œæ•´çš„ Document Editor
- âœ… æ›´å¥½çš„ç¼–è¾‘ä½“éªŒå’Œæ€§èƒ½
- âœ… æ”¯æŒå¤æ‚çš„å¯Œæ–‡æœ¬æ ¼å¼å’Œå¸ƒå±€

---

## ğŸ“‹ æ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | JSON å­—æ®µæ–¹æ¡ˆ | å…³ç³»è¡¨æ–¹æ¡ˆ |
|------|--------------|-----------|
| **æœ€ä½³ç”¨é€”** | çŸ­æ–‡æœ¬ï¼ˆname, titleï¼‰ | å¯Œæ–‡æœ¬å†…å®¹ï¼ˆcontentï¼‰ |
| **ç¼–è¾‘æ–¹å¼** | æ‰€æœ‰è¯­è¨€åœ¨ä¸€ä¸ªè¡¨å• | æ¯ä¸ªè¯­è¨€å•ç‹¬ç¼–è¾‘ |
| **ç¼–è¾‘å™¨ç±»å‹** | ç®€å•æ–‡æœ¬æ¡† / ç®€åŒ–å¯Œæ–‡æœ¬ | å®Œæ•´ Document Editor |
| **æ€§èƒ½** | åŠ è½½æ‰€æœ‰è¯­è¨€ | æŒ‰éœ€åŠ è½½å•ä¸ªè¯­è¨€ |
| **Schema å¤æ‚åº¦** | ç®€å•ï¼ˆ1ä¸ªå­—æ®µï¼‰ | éœ€è¦é¢å¤–ç¿»è¯‘è¡¨ |
| **æŸ¥è¯¢æ–¹å¼** | è§£æ JSON | JOIN æŸ¥è¯¢ |
| **é€‚åˆåœºæ™¯** | name, title, shortDescription | content, contentBody |

---

## ğŸ¯ æ–¹æ¡ˆ 1: JSON å­—æ®µæ–¹æ¡ˆ

### æ ¸å¿ƒå†³ç­–

ç»è¿‡å®é™…å¼€å‘éªŒè¯ï¼Œ**çŸ­æ–‡æœ¬å­—æ®µ**é‡‡ç”¨ **JSON å­—æ®µ + è‡ªå®šä¹‰å¤šè¯­è¨€ç¼–è¾‘å™¨ç»„ä»¶** çš„æ–¹æ¡ˆã€‚

#### æ–¹æ¡ˆç‰¹ç‚¹

| ç»´åº¦ | JSON å­—æ®µæ–¹æ¡ˆ | ä¼˜åŠ¿ |
|------|--------------|------|
| **å­˜å‚¨æ–¹å¼** | å•ä¸ª JSON åˆ—å­˜å‚¨æ‰€æœ‰è¯­è¨€ | âœ… Schema ç®€æ´ |
| **ç¼–è¾‘ä½“éªŒ** | è‡ªå®šä¹‰ React ç»„ä»¶ | âœ… ç»Ÿä¸€çš„å¤šè¯­è¨€ç¼–è¾‘ç•Œé¢ |
| **è‡ªåŠ¨ç¿»è¯‘** | é›†æˆ AI ç¿»è¯‘ API | âœ… ä¸€é”®ç¿»è¯‘ 24 ç§è¯­è¨€ |
| **æ•°æ®å®Œæ•´æ€§** | JSON ç»“æ„éªŒè¯ | âœ… ç¡®ä¿æ•°æ®æ ¼å¼ä¸€è‡´ |
| **è¿ç§»å‹å¥½** | å•å­—æ®µæ›´æ–° | âœ… æ–°å¢è¯­è¨€æ— éœ€ä¿®æ”¹ Schema |
| **ç±»å‹å®‰å…¨** | TypeScript æ¥å£å®šä¹‰ | âœ… å®Œæ•´çš„ç±»å‹æ£€æŸ¥ |

**ç»“è®º**: JSON æ–¹æ¡ˆåœ¨ä¿æŒ Schema ç®€æ´çš„åŒæ—¶ï¼Œé€šè¿‡è‡ªå®šä¹‰ç¼–è¾‘å™¨æä¾›äº†ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚

---

## ğŸ“‹ å¤šè¯­è¨€æ•°æ®ç»“æ„

### JSON æ ¼å¼å®šä¹‰

æ‰€æœ‰å¤šè¯­è¨€å­—æ®µç»Ÿä¸€ä½¿ç”¨ä»¥ä¸‹ JSON æ ¼å¼ï¼š

```typescript
// å•è¡Œæ–‡æœ¬å­—æ®µï¼ˆå¦‚ nameï¼‰
{
  "en": "Glass Door Handle",
  "zh": "ç»ç’ƒé—¨æŠŠæ‰‹",
  "es": "Manija de puerta de vidrio",
  "fr": "PoignÃ©e de porte en verre",
  // ... å…¶ä»– 20 ç§è¯­è¨€
}

// å¯Œæ–‡æœ¬å­—æ®µï¼ˆå¦‚ descriptionï¼‰
{
  "en": [
    { type: 'paragraph', children: [{ text: 'High-quality glass hardware...' }] }
  ],
  "zh": [
    { type: 'paragraph', children: [{ text: 'é«˜å“è´¨ç»ç’ƒäº”é‡‘é…ä»¶...' }] }
  ],
  // ... å…¶ä»–è¯­è¨€çš„ Document ç»“æ„
}
```

### æ”¯æŒçš„è¯­è¨€ä»£ç  (24 ç§)

```typescript
export const SUPPORTED_LANGUAGES = [
  'en', 'zh', 'es', 'fr', 'de', 'it', 'pt', 'nl', 
  'sv', 'da', 'no', 'fi', 'is', 'cs', 'hu', 'pl', 
  'sk', 'ar', 'he', 'fa', 'tr', 'az', 'ber', 'ku'
] as const

export type LanguageCode = typeof SUPPORTED_LANGUAGES[number]
```

---

## ğŸ”§ Keystone Schema å®ç°

### ç¤ºä¾‹ï¼šProduct æ¨¡å‹

```typescript
// keystone/schemas/Product.ts
import { list } from '@keystone-6/core'
import { text, json, select, relationship, timestamp } from '@keystone-6/core/fields'

export const Product = list({
  fields: {
    // æ ¸å¿ƒæ ‡è¯†
    sku: text({
      validation: { isRequired: true },
      isIndexed: 'unique',
      ui: { description: 'Unique product code (e.g., "GDH-001-SS")' },
    }),

    slug: text({
      validation: { isRequired: true },
      isIndexed: 'unique',
      ui: { description: 'URL-friendly identifier' },
    }),

    // ğŸ”¥ è½¯åˆ é™¤çŠ¶æ€
    status: select({
      options: [
        { label: 'Active', value: 'ACTIVE' },
        { label: 'Archived', value: 'ARCHIVED' },
      ],
      defaultValue: 'ACTIVE',
      ui: { displayMode: 'segmented-control' },
    }),

    // ==================================================================
    // ğŸŒ å¤šè¯­è¨€å­—æ®µï¼šåç§°ï¼ˆJSON æ ¼å¼ + è‡ªå®šä¹‰ç¼–è¾‘å™¨ï¼‰
    // ==================================================================
    name: json({
      label: 'Product Name',
      defaultValue: '{}',
      ui: {
        views: './custom-fields/MultilingualJSONField',
        description: 'Product name in all 24 languages with auto-translation',
      },
    }),

    // ==================================================================
    // ğŸŒ å¤šè¯­è¨€å­—æ®µï¼šç®€çŸ­æè¿°ï¼ˆJSON æ ¼å¼ + å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
    // ==================================================================
    shortDescription: json({
      label: 'Short Description',
      defaultValue: '{}',
      ui: {
        views: './custom-fields/MultilingualJSONDocumentField',
        description: 'Brief product description in all 24 languages',
      },
    }),

    // ==================================================================
    // ğŸŒ å¤šè¯­è¨€å­—æ®µï¼šå®Œæ•´æè¿°ï¼ˆJSON æ ¼å¼ + å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
    // ==================================================================
    description: json({
      label: 'Full Description',
      defaultValue: '{}',
      ui: {
        views: './custom-fields/MultilingualJSONDocumentField',
        description: 'Detailed product description with rich text support',
      },
    }),

    // éå¤šè¯­è¨€å­—æ®µ
    images: relationship({
      ref: 'Media',
      many: true,
      ui: {
        displayMode: 'cards',
        cardFields: ['file', 'filename'],
      },
    }),

    series: relationship({
      ref: 'ProductSeries.products',
      many: false,
    }),

    category: relationship({
      ref: 'Category',
      many: false,
    }),

    createdAt: timestamp({
      defaultValue: { kind: 'now' },
    }),

    updatedAt: timestamp({
      db: { updatedAt: true },
    }),
  },

  // ğŸ”¥ ç¦ç”¨ç‰©ç†åˆ é™¤
  access: {
    operation: {
      delete: () => false,
    },
  },

  ui: {
    listView: {
      initialColumns: ['sku', 'series', 'category', 'status'],
      initialSort: { field: 'createdAt', direction: 'DESC' },
    },
    labelField: 'sku',
  },
})
```

---

## ğŸ¨ è‡ªå®šä¹‰å¤šè¯­è¨€ç¼–è¾‘å™¨

### 1. æ–‡æœ¬å­—æ®µç¼–è¾‘å™¨ (MultilingualJSONField)

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š
- âœ… 24 ç§è¯­è¨€çš„æ ‡ç­¾é¡µåˆ‡æ¢
- âœ… æ˜¾ç¤ºç¿»è¯‘å®Œæˆåº¦ï¼ˆå¦‚ "12/24 languages"ï¼‰
- âœ… ä¸€é”® AI è‡ªåŠ¨ç¿»è¯‘ï¼ˆåŸºäºè‹±æ–‡å†…å®¹ï¼‰
- âœ… æ”¯æŒæ‰¹é‡ç¿»è¯‘æˆ–å•ç‹¬ç¿»è¯‘
- âœ… å®æ—¶ä¿å­˜åˆ° JSON å­—æ®µ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```typescript
// keystone/custom-fields/MultilingualJSONField.tsx
/** @jsxRuntime classic */
/** @jsx jsx */
import { jsx } from '@keystone-ui/core'
import { FieldProps } from '@keystone-6/core/types'
import { Button } from '@keystone-ui/button'
import { useState } from 'react'
import { SUPPORTED_LANGUAGES } from '@/constants/language'

export function MultilingualJSONField({ 
  field, 
  value, 
  onChange 
}: FieldProps<typeof controller>) {
  const [activeTab, setActiveTab] = useState('en')
  const multilingualData = typeof value === 'string' ? JSON.parse(value || '{}') : value || {}

  const handleChange = (lang: string, text: string) => {
    const newData = { ...multilingualData, [lang]: text }
    onChange(JSON.stringify(newData))
  }

  const handleAutoTranslate = async () => {
    const sourceText = multilingualData.en
    if (!sourceText) {
      alert('Please enter English text first')
      return
    }

    // è°ƒç”¨ç¿»è¯‘ APIï¼ˆç¤ºä¾‹ï¼‰
    const translations = await translateToAllLanguages(sourceText)
    const newData = { ...multilingualData, ...translations }
    onChange(JSON.stringify(newData))
  }

  const completedCount = SUPPORTED_LANGUAGES.filter(
    lang => multilingualData[lang]?.trim()
  ).length

  return (
    <div>
      {/* ç»Ÿè®¡å’Œæ“ä½œæŒ‰é’® */}
      <div style={{ marginBottom: '16px', display: 'flex', gap: '12px' }}>
        <div style={{ fontSize: '14px', color: '#666' }}>
          Completed: {completedCount}/{SUPPORTED_LANGUAGES.length} languages
        </div>
        <Button size="small" onClick={handleAutoTranslate}>
          ğŸ¤– Auto Translate All
        </Button>
      </div>

      {/* è¯­è¨€æ ‡ç­¾é¡µ */}
      <div style={{ 
        display: 'flex', 
        gap: '8px', 
        marginBottom: '16px',
        flexWrap: 'wrap' 
      }}>
        {SUPPORTED_LANGUAGES.map(lang => {
          const hasContent = !!multilingualData[lang]?.trim()
          return (
            <button
              key={lang}
              onClick={() => setActiveTab(lang)}
              style={{
                padding: '8px 12px',
                border: activeTab === lang ? '2px solid #007bff' : '1px solid #ddd',
                borderRadius: '4px',
                background: hasContent ? '#e8f5e9' : '#fff',
                cursor: 'pointer',
                fontSize: '14px',
              }}
            >
              {lang.toUpperCase()}
              {hasContent && <span style={{ color: '#4caf50' }}> âœ“</span>}
            </button>
          )
        })}
      </div>

      {/* å½“å‰è¯­è¨€çš„æ–‡æœ¬è¾“å…¥ */}
      <textarea
        value={multilingualData[activeTab] || ''}
        onChange={(e) => handleChange(activeTab, e.target.value)}
        placeholder={`Enter ${activeTab.toUpperCase()} text here...`}
        style={{
          width: '100%',
          minHeight: '100px',
          padding: '12px',
          border: '1px solid #ddd',
          borderRadius: '4px',
          fontSize: '14px',
        }}
      />
    </div>
  )
}

// Controller å®šä¹‰
export const controller = {
  path: 'name',
  label: 'Name',
  graphqlSelection: 'name',
  defaultValue: '{}',
  deserialize: (data: any) => data.name,
  serialize: (value: any) => ({ name: value }),
}
```

---

### 2. å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ (MultilingualJSONDocumentField)

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š
- âœ… é›†æˆ Keystone Document Field
- âœ… æ¯ç§è¯­è¨€ç‹¬ç«‹çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- âœ… æ”¯æŒæ‰€æœ‰ Document Field ç»„ä»¶
- âœ… æ”¯æŒ AI ç¿»è¯‘å¯Œæ–‡æœ¬å†…å®¹
- âœ… JSON æ ¼å¼å­˜å‚¨ Document ç»“æ„

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```typescript
// keystone/custom-fields/MultilingualJSONDocumentField.tsx
/** @jsxRuntime classic */
/** @jsx jsx */
import { jsx } from '@keystone-ui/core'
import { FieldProps } from '@keystone-6/core/types'
import { DocumentEditor } from '@keystone-6/fields-document/views'
import { useState } from 'react'
import { SUPPORTED_LANGUAGES, LANGUAGE_NAMES } from '@/constants/language'
import { componentBlocks } from '../component-blocks'

export function MultilingualJSONDocumentField({ 
  field, 
  value, 
  onChange 
}: FieldProps<typeof controller>) {
  const [activeTab, setActiveTab] = useState('en')
  const multilingualData = typeof value === 'string' ? JSON.parse(value || '{}') : value || {}

  const handleChange = (lang: string, content: any) => {
    const newData = { ...multilingualData, [lang]: content }
    onChange(JSON.stringify(newData))
  }

  const completedCount = SUPPORTED_LANGUAGES.filter(
    lang => multilingualData[lang] && multilingualData[lang].length > 0
  ).length

  return (
    <div>
      {/* ç»Ÿè®¡ä¿¡æ¯ */}
      <div style={{ marginBottom: '16px', fontSize: '14px', color: '#666' }}>
        Completed: {completedCount}/{SUPPORTED_LANGUAGES.length} languages
      </div>

      {/* è¯­è¨€æ ‡ç­¾é¡µ */}
      <div style={{ 
        display: 'flex', 
        gap: '8px', 
        marginBottom: '16px',
        flexWrap: 'wrap' 
      }}>
        {SUPPORTED_LANGUAGES.map(lang => {
          const hasContent = multilingualData[lang] && multilingualData[lang].length > 0
          return (
            <button
              key={lang}
              onClick={() => setActiveTab(lang)}
              style={{
                padding: '8px 12px',
                border: activeTab === lang ? '2px solid #007bff' : '1px solid #ddd',
                borderRadius: '4px',
                background: hasContent ? '#e8f5e9' : '#fff',
                cursor: 'pointer',
                fontSize: '14px',
              }}
            >
              {lang.toUpperCase()}
              {hasContent && <span style={{ color: '#4caf50' }}> âœ“</span>}
            </button>
          )
        })}
      </div>

      {/* å½“å‰è¯­è¨€çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ */}
      <div style={{ 
        border: '1px solid #ddd', 
        padding: '16px', 
        borderRadius: '4px',
        minHeight: '300px'
      }}>
        <div style={{ marginBottom: '12px', fontWeight: 'bold' }}>
          {LANGUAGE_NAMES[activeTab] || activeTab.toUpperCase()}
        </div>
        <DocumentEditor
          value={multilingualData[activeTab] || [{ type: 'paragraph', children: [{ text: '' }] }]}
          onChange={(newValue) => handleChange(activeTab, newValue)}
          componentBlocks={componentBlocks}
        />
      </div>
    </div>
  )
}

// Controller å®šä¹‰
export const controller = {
  path: 'description',
  label: 'Description',
  graphqlSelection: 'description',
  defaultValue: '{}',
  deserialize: (data: any) => data.description,
  serialize: (value: any) => ({ description: value }),
}
```

---

## ğŸ”„ æ•°æ®æŸ¥è¯¢å’Œè½¬æ¢

### GraphQL æŸ¥è¯¢ç¤ºä¾‹

```graphql
query GetProduct($id: ID!) {
  product(where: { id: $id }) {
    id
    sku
    slug
    name        # JSON å­—ç¬¦ä¸²ï¼š{"en":"...","zh":"..."}
    description # JSON å­—ç¬¦ä¸²ï¼š{"en":[...],"zh":[...]}
    status
    images {
      id
      file {
        url
      }
    }
  }
}
```

### Next.js API èšåˆå±‚è½¬æ¢

```typescript
// web/app/api/v1/products/[sku]/route.ts
import { keystoneClient } from '@/lib/keystone-client'

export async function GET(
  request: Request,
  { params }: { params: { sku: string } }
) {
  const locale = new URL(request.url).searchParams.get('locale') || 'en'

  // 1. ä» Keystone è·å–æ•°æ®
  const { data } = await keystoneClient.query({
    query: GET_PRODUCT_QUERY,
    variables: { sku: params.sku }
  })

  // 2. è§£æ JSON å¹¶æå–å½“å‰è¯­è¨€
  const product = data.product
  const nameData = JSON.parse(product.name || '{}')
  const descriptionData = JSON.parse(product.description || '{}')

  // 3. è¿”å›æ‰å¹³åŒ–çš„å•è¯­è¨€æ•°æ®
  return Response.json({
    id: product.id,
    sku: product.sku,
    slug: product.slug,
    name: nameData[locale] || nameData.en || '',
    description: descriptionData[locale] || descriptionData.en || [],
    status: product.status,
    images: product.images.map((img: any) => ({
      id: img.id,
      url: img.file.url,
    })),
  })
}
```

### TypeScript ç±»å‹å®šä¹‰

```typescript
// lib/types/multilingual.ts

/**
 * å¤šè¯­è¨€æ–‡æœ¬ç±»å‹
 */
export type MultilingualText = {
  [key in LanguageCode]?: string
}

/**
 * å¤šè¯­è¨€å¯Œæ–‡æœ¬ç±»å‹ï¼ˆDocument Fieldï¼‰
 */
export type MultilingualDocument = {
  [key in LanguageCode]?: DocumentNode[]
}

/**
 * Document Field èŠ‚ç‚¹ç±»å‹
 */
export interface DocumentNode {
  type: string
  children: Array<{ text: string } | DocumentNode>
  [key: string]: any
}

/**
 * å·¥å…·å‡½æ•°ï¼šæå–æŒ‡å®šè¯­è¨€çš„æ–‡æœ¬
 */
export function getLocalizedText(
  data: MultilingualText | string,
  locale: LanguageCode,
  fallback: LanguageCode = 'en'
): string {
  if (typeof data === 'string') {
    try {
      data = JSON.parse(data)
    } catch {
      return data
    }
  }
  return data[locale] || data[fallback] || ''
}

/**
 * å·¥å…·å‡½æ•°ï¼šæå–æŒ‡å®šè¯­è¨€çš„å¯Œæ–‡æœ¬
 */
export function getLocalizedDocument(
  data: MultilingualDocument | string,
  locale: LanguageCode,
  fallback: LanguageCode = 'en'
): DocumentNode[] {
  if (typeof data === 'string') {
    try {
      data = JSON.parse(data)
    } catch {
      return []
    }
  }
  return data[locale] || data[fallback] || []
}
```

---

## ğŸ¤– AI è‡ªåŠ¨ç¿»è¯‘é›†æˆ

### ç¿»è¯‘æœåŠ¡ç¤ºä¾‹

```typescript
// lib/translation/translate.ts
import Anthropic from '@anthropic-ai/sdk'

const anthropic = new Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY,
})

/**
 * ç¿»è¯‘æ–‡æœ¬åˆ°æ‰€æœ‰æ”¯æŒçš„è¯­è¨€
 */
export async function translateToAllLanguages(
  sourceText: string,
  sourceLanguage: LanguageCode = 'en'
): Promise<MultilingualText> {
  const targetLanguages = SUPPORTED_LANGUAGES.filter(lang => lang !== sourceLanguage)
  
  const prompt = `
You are a professional translator. Please translate the following text from ${sourceLanguage} to all these languages:
${targetLanguages.join(', ')}

Source text:
${sourceText}

Please return the translations in JSON format like this:
{
  "es": "translated text in Spanish",
  "fr": "translated text in French",
  ...
}

Only return the JSON object, no other text.
`

  const message = await anthropic.messages.create({
    model: 'claude-3-5-sonnet-20241022',
    max_tokens: 4096,
    messages: [{ role: 'user', content: prompt }],
  })

  const responseText = message.content[0].type === 'text' 
    ? message.content[0].text 
    : ''
  
  try {
    const translations = JSON.parse(responseText)
    return { [sourceLanguage]: sourceText, ...translations }
  } catch (error) {
    console.error('Failed to parse translation response:', error)
    return { [sourceLanguage]: sourceText }
  }
}

/**
 * ç¿»è¯‘å¯Œæ–‡æœ¬å†…å®¹
 */
export async function translateDocument(
  document: DocumentNode[],
  sourceLanguage: LanguageCode,
  targetLanguages: LanguageCode[]
): Promise<MultilingualDocument> {
  // 1. æå–çº¯æ–‡æœ¬
  const plainText = extractTextFromDocument(document)
  
  // 2. ç¿»è¯‘æ–‡æœ¬
  const translations = await translateToAllLanguages(plainText, sourceLanguage)
  
  // 3. é‡å»º Document ç»“æ„ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼Œä¿æŒç›¸åŒç»“æ„ï¼‰
  const result: MultilingualDocument = {
    [sourceLanguage]: document
  }
  
  for (const [lang, text] of Object.entries(translations)) {
    if (lang !== sourceLanguage) {
      result[lang as LanguageCode] = [
        {
          type: 'paragraph',
          children: [{ text }]
        }
      ]
    }
  }
  
  return result
}

function extractTextFromDocument(nodes: DocumentNode[]): string {
  return nodes.map(node => {
    if ('text' in node) return node.text
    if (node.children) return extractTextFromDocument(node.children)
    return ''
  }).join('\n')
}
```

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### åœ¨ CMS ä¸­ç¼–è¾‘å¤šè¯­è¨€å†…å®¹

1. **ç¼–è¾‘è‹±æ–‡å†…å®¹**ï¼ˆå¿…å¡«ï¼‰
   - ç‚¹å‡» "EN" æ ‡ç­¾é¡µ
   - è¾“å…¥è‹±æ–‡æ–‡æœ¬

2. **è‡ªåŠ¨ç¿»è¯‘**
   - ç‚¹å‡» "ğŸ¤– Auto Translate All" æŒ‰é’®
   - ç³»ç»Ÿä¼šè‡ªåŠ¨ç¿»è¯‘åˆ°å…¶ä»– 23 ç§è¯­è¨€

3. **æ‰‹åŠ¨è°ƒæ•´ç¿»è¯‘**
   - åˆ‡æ¢åˆ°å¯¹åº”è¯­è¨€æ ‡ç­¾é¡µ
   - ä¿®æ”¹ AI ç¿»è¯‘çš„å†…å®¹

4. **ä¿å­˜**
   - ç‚¹å‡»ä¿å­˜æŒ‰é’®
   - æ‰€æœ‰è¯­è¨€å†…å®¹ä¿å­˜åˆ°å•ä¸ª JSON å­—æ®µ

### åœ¨å…¶ä»–æ¨¡å‹ä¸­ä½¿ç”¨

æ‰€æœ‰éœ€è¦å¤šè¯­è¨€çš„æ¨¡å‹éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹å¼ï¼š

```typescript
// å•è¡Œæ–‡æœ¬å­—æ®µ
name: json({
  label: 'Name',
  defaultValue: '{}',
  ui: { views: './custom-fields/MultilingualJSONField' },
}),

// å¤šè¡Œæ–‡æœ¬å­—æ®µ
description: json({
  label: 'Description',
  defaultValue: '{}',
  ui: { views: './custom-fields/MultilingualJSONDocumentField' },
}),
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. GraphQL æŸ¥è¯¢ä¼˜åŒ–

```graphql
# âŒ ä¸æ¨èï¼šæŸ¥è¯¢æ‰€æœ‰è¯­è¨€
query GetProducts {
  products {
    name  # åŒ…å« 24 ç§è¯­è¨€çš„å®Œæ•´ JSON
  }
}

# âœ… æ¨èï¼šåœ¨ API å±‚å¤„ç†
query GetProducts {
  products {
    id
    sku
    name  # åœ¨ API å±‚è§£æå¹¶åªè¿”å›éœ€è¦çš„è¯­è¨€
  }
}
```

### 2. ç¼“å­˜ç­–ç•¥

```typescript
// Next.js API Route with ISR
export const revalidate = 3600 // 1 hour

export async function GET(request: Request) {
  const locale = new URL(request.url).searchParams.get('locale') || 'en'
  
  // ä½¿ç”¨ Next.js ç¼“å­˜
  const product = await fetch(`${CMS_URL}/graphql`, {
    next: { revalidate: 3600 }
  })
  
  // ... å¤„ç†æ•°æ®
}
```

### 3. æ•°æ®åº“ç´¢å¼•

è™½ç„¶æ˜¯ JSON å­—æ®µï¼Œä»ç„¶å¯ä»¥åˆ›å»º GIN ç´¢å¼•ï¼š

```sql
-- PostgreSQL GIN ç´¢å¼•ç”¨äº JSON å­—æ®µ
CREATE INDEX idx_product_name_gin ON "Product" USING GIN (name);
```

---

## ğŸ” å¯¹æ¯”ï¼šJSON vs åˆ†ç¦»å­—æ®µ

| ç»´åº¦ | JSON æ–¹æ¡ˆï¼ˆå½“å‰ï¼‰ | åˆ†ç¦»å­—æ®µæ–¹æ¡ˆ | é€‰æ‹©åŸå›  |
|------|-----------------|-------------|---------|
| Schema å¤æ‚åº¦ | âœ… ç®€æ´ï¼ˆ1ä¸ªå­—æ®µï¼‰ | âŒ å¤æ‚ï¼ˆ24ä¸ªå­—æ®µï¼‰ | JSON æ›´æ¸…æ™° |
| ç¼–è¾‘ä½“éªŒ | âœ… ç»Ÿä¸€ç¼–è¾‘å™¨ | âŒ éœ€éšè—å­—æ®µ | JSON æ›´å‹å¥½ |
| è‡ªåŠ¨ç¿»è¯‘ | âœ… æ˜“äºé›†æˆ | âŒ éœ€è¦å¤æ‚é€»è¾‘ | JSON æ›´çµæ´» |
| æŸ¥è¯¢æ€§èƒ½ | âš ï¸ éœ€è¦è§£æ | âœ… ç›´æ¥æŸ¥è¯¢ | å¯æ¥å—çš„æƒè¡¡ |
| æ•°æ®è¿ç§» | âœ… å•å­—æ®µæ›´æ–° | âŒ éœ€ä¿®æ”¹å¤šä¸ªå­—æ®µ | JSON æ›´ç®€å• |

**æœ€ç»ˆé€‰æ‹© JSON æ–¹æ¡ˆçš„åŸå› **ï¼š
1. âœ… Schema æ›´ç®€æ´æ˜“ç»´æŠ¤
2. âœ… è‡ªå®šä¹‰ç¼–è¾‘å™¨ä½“éªŒæ›´å¥½
3. âœ… æ˜“äºé›†æˆ AI ç¿»è¯‘åŠŸèƒ½
4. âœ… æ•°æ®è¿ç§»å’Œæ‰©å±•æ›´å®¹æ˜“
5. âš ï¸ æ€§èƒ½å½±å“å¯é€šè¿‡ç¼“å­˜å’Œç´¢å¼•ä¼˜åŒ–

---

---

## ğŸ¯ æ–¹æ¡ˆ 2: å…³ç³»è¡¨æ–¹æ¡ˆï¼ˆä¸»è¡¨ + ç¿»è¯‘è¡¨ï¼‰

### é€‚ç”¨åœºæ™¯

**å¯Œæ–‡æœ¬å†…å®¹å­—æ®µ**é‡‡ç”¨ **ä¸»è¡¨ + ç¿»è¯‘è¡¨** çš„å…³ç³»å‹æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š
- Product çš„ `content` å­—æ®µ â†’ `ProductContentTranslation` è¡¨
- ProductSeries çš„ `content` å­—æ®µ â†’ `ProductSeriesContentTranslation` è¡¨

### ä¸ºä»€ä¹ˆéœ€è¦å…³ç³»è¡¨æ–¹æ¡ˆï¼Ÿ

#### JSON æ–¹æ¡ˆçš„å±€é™æ€§

å¯¹äºå¯Œæ–‡æœ¬å†…å®¹ï¼š
- âŒ æ‰€æœ‰ 24 ç§è¯­è¨€åŒæ—¶åŠ è½½ï¼ŒUI å¡é¡¿
- âŒ Document Editor åœ¨æ ‡ç­¾é¡µä¸­åˆ‡æ¢ä½“éªŒå·®
- âŒ æ— æ³•åˆ©ç”¨ Keystone åŸç”Ÿçš„å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½

#### å…³ç³»è¡¨æ–¹æ¡ˆçš„ä¼˜åŠ¿

- âœ… **æ›´å¥½çš„ç¼–è¾‘ä½“éªŒ**ï¼šæ¯ä¸ªè¯­è¨€ç‹¬ç«‹é¡µé¢ï¼Œå®Œæ•´çš„ Document Editor
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šæŒ‰éœ€åŠ è½½å•ä¸ªè¯­è¨€ï¼Œä¸ç”¨ä¸€æ¬¡åŠ è½½ 24 ç§è¯­è¨€
- âœ… **åŸç”Ÿæ”¯æŒ**ï¼šä½¿ç”¨ Keystone åŸç”Ÿ `document` å­—æ®µç±»å‹
- âœ… **çµæ´»æŸ¥è¯¢**ï¼šé€šè¿‡ GraphQL ç²¾ç¡®æŸ¥è¯¢éœ€è¦çš„è¯­è¨€

---

### Schema å®šä¹‰ç¤ºä¾‹

#### ä¸»è¡¨ï¼šProduct / ProductSeries

```typescript
// cms/schemas/Product.ts (éƒ¨åˆ†ä»£ç )
export const Product = list({
  fields: {
    sku: text({ isIndexed: 'unique' }),

    // JSON æ–¹æ¡ˆï¼šçŸ­æ–‡æœ¬å­—æ®µ
    name: json({
      label: 'Product Name',
      defaultValue: {},
      ui: {
        views: './custom-fields/MultilingualJSONField',
      },
    }),

    shortDescription: json({
      label: 'Short Description',
      defaultValue: {},
      ui: {
        views: './custom-fields/MultilingualJSONDocumentField',
      },
    }),

    // å…³ç³»è¡¨æ–¹æ¡ˆï¼šå¯Œæ–‡æœ¬å†…å®¹
    contentTranslations: relationship({
      ref: 'ProductContentTranslation.product',
      many: true,
      ui: {
        displayMode: 'cards',
        cardFields: ['locale', 'updatedAt'],
        inlineCreate: { fields: ['locale'] },
        inlineEdit: { fields: ['locale', 'content'] },
        linkToItem: true,
        description: 'Click language card to edit rich text content',
      },
    }),

    // è™šæ‹Ÿå­—æ®µï¼šå¿«é€ŸæŒ‰è¯­è¨€æŸ¥è¯¢
    contentByLocale: virtual({
      field: graphql.field({
        type: graphql.object<{ locale: string; content: any }>()({
          name: 'ProductContentByLocale',
          fields: {
            locale: graphql.field({ type: graphql.String }),
            content: graphql.field({ type: graphql.JSON }),
          },
        }),
        args: {
          locale: graphql.arg({ type: graphql.nonNull(graphql.String) }),
        },
        async resolve(item, { locale }, context) {
          const translations = await context.query.ProductContentTranslation.findMany({
            where: {
              product: { id: { equals: item.id as string } },
              locale: { equals: locale },
            },
            query: 'locale content',
          })
          return translations[0] || { locale, content: null }
        },
      }),
    }),

    // è™šæ‹Ÿå­—æ®µï¼šæ˜¾ç¤ºå·²ç¿»è¯‘çš„è¯­è¨€åˆ—è¡¨
    translatedLocales: virtual({
      field: graphql.field({
        type: graphql.String,
        async resolve(item, args, context) {
          const translations = await context.query.ProductContentTranslation.findMany({
            where: {
              product: { id: { equals: item.id as string } },
            },
            query: 'locale',
          })
          const locales = translations.map((t: any) => String(t.locale))
          return JSON.stringify(locales)
        },
      }),
      ui: {
        listView: { fieldMode: 'read' },
        views: './custom-fields/TranslatedLocalesDisplay',
      },
    }),
  },
})
```

#### ç¿»è¯‘è¡¨ï¼šProductContentTranslation

```typescript
// cms/schemas/ProductContentTranslation.ts
import { list } from '@keystone-6/core'
import { text, relationship, timestamp } from '@keystone-6/core/fields'
import { document } from '@keystone-6/fields-document'

export const ProductContentTranslation = list({
  fields: {
    /**
     * Localeï¼ˆè¯­è¨€ä»£ç ï¼‰
     * ä½¿ç”¨è‡ªå®šä¹‰é€‰æ‹©å™¨ï¼Œè‡ªåŠ¨ç¦ç”¨å·²ä½¿ç”¨çš„è¯­è¨€
     */
    locale: text({
      validation: { isRequired: true },
      ui: {
        views: './custom-fields/LocaleSelectField',
        description: 'Select language (already-used languages are disabled)',
      },
    }),

    /**
     * Contentï¼ˆå¯Œæ–‡æœ¬å†…å®¹ï¼‰
     * ä½¿ç”¨ Keystone åŸç”Ÿ document å­—æ®µ
     */
    content: document({
      formatting: {
        inlineMarks: {
          bold: true,
          italic: true,
          underline: true,
          strikethrough: true,
          code: true,
        },
        listTypes: { ordered: true, unordered: true },
        alignment: { center: true, end: true },
        headingLevels: [1, 2, 3, 4, 5, 6],
        blockTypes: { blockquote: true, code: true },
        softBreaks: true,
      },
      links: true,
      dividers: true,
      layouts: [[1, 1], [1, 1, 1], [2, 1], [1, 2]],
      ui: {
        views: './custom-fields/DocumentEditorWithTranslation',
      },
    }),

    /**
     * å…³è”åˆ°ä¸»è¡¨
     */
    product: relationship({
      ref: 'Product.contentTranslations',
      ui: {
        displayMode: 'cards',
        cardFields: ['sku'],
        hideCreate: true,
      },
    }),

    createdAt: timestamp({ defaultValue: { kind: 'now' } }),
    updatedAt: timestamp({ db: { updatedAt: true } }),
  },

  // åœ¨ä¸»èœå•ä¸­éšè—ï¼ˆä»…é€šè¿‡ Product è®¿é—®ï¼‰
  ui: {
    isHidden: true,
    listView: {
      initialColumns: ['locale', 'product', 'updatedAt'],
    },
  },

  /**
   * Hooksï¼šç¡®ä¿å”¯ä¸€æ€§
   * æ¯ä¸ª Product åœ¨æ¯ä¸ª locale åªèƒ½æœ‰ä¸€æ¡ç¿»è¯‘è®°å½•
   */
  hooks: {
    validateInput: async ({ resolvedData, addValidationError, context, operation }) => {
      if (operation === 'create' && resolvedData.locale && resolvedData.product) {
        const productId = resolvedData.product.connect?.id

        const existing = await context.query.ProductContentTranslation.findMany({
          where: {
            locale: { equals: resolvedData.locale },
            product: { id: { equals: productId } },
          },
        })

        if (existing.length > 0) {
          addValidationError(`Translation for "${resolvedData.locale}" already exists`)
        }
      }
    },
  },
})
```

---

### CMS ç¼–è¾‘æµç¨‹

#### 1. åœ¨ Product é¡µé¢ç¼–è¾‘çŸ­æ–‡æœ¬

1. æ‰“å¼€ Product ç¼–è¾‘é¡µé¢
2. **Name å­—æ®µ**ï¼ˆJSON æ–¹æ¡ˆï¼‰ï¼š
   - çœ‹åˆ°æ‰€æœ‰ 24 ç§è¯­è¨€çš„æ ‡ç­¾é¡µ
   - ç‚¹å‡»æ ‡ç­¾é¡µåˆ‡æ¢è¯­è¨€
   - ç‚¹å‡»"Auto Translate"ä¸€é”®ç¿»è¯‘

3. **Short Description å­—æ®µ**ï¼ˆJSON æ–¹æ¡ˆï¼‰ï¼š
   - åŒæ ·çš„å¤šè¯­è¨€æ ‡ç­¾é¡µç•Œé¢
   - ç®€åŒ–ç‰ˆ Document Editor

#### 2. ç¼–è¾‘å¯Œæ–‡æœ¬å†…å®¹

1. åœ¨ Product é¡µé¢æ‰¾åˆ° **Content Translations** éƒ¨åˆ†
2. çœ‹åˆ°è¯­è¨€å¡ç‰‡åˆ—è¡¨ï¼ˆå¦‚ï¼šEN, ZH, ES...ï¼‰
3. ç‚¹å‡» "Create" åˆ›å»ºæ–°è¯­è¨€ç¿»è¯‘
4. é€‰æ‹©è¯­è¨€ï¼ˆå·²åˆ›å»ºçš„è¯­è¨€è‡ªåŠ¨ç¦ç”¨ï¼‰
5. è¿›å…¥ç‹¬ç«‹é¡µé¢ï¼Œä½¿ç”¨å®Œæ•´çš„ Document Editor ç¼–è¾‘
6. æ”¯æŒæ‰€æœ‰å¯Œæ–‡æœ¬åŠŸèƒ½ï¼šæ ‡é¢˜ã€åˆ—è¡¨ã€å¸ƒå±€ã€å›¾ç‰‡ç­‰

---

### GraphQL æŸ¥è¯¢ç¤ºä¾‹

#### æŸ¥è¯¢æ‰€æœ‰ç¿»è¯‘

```graphql
query GetProduct($sku: String!) {
  products(where: { sku: { equals: $sku } }) {
    id
    sku

    # JSON å­—æ®µï¼šæ‰€æœ‰è¯­è¨€åœ¨ä¸€ä¸ªå­—æ®µä¸­
    name          # {"en":"...","zh":"..."}
    shortDescription

    # å…³ç³»è¡¨ï¼šæŸ¥è¯¢æ‰€æœ‰ç¿»è¯‘è®°å½•
    contentTranslations {
      locale
      content
      updatedAt
    }
  }
}
```

#### æŸ¥è¯¢ç‰¹å®šè¯­è¨€ï¼ˆä½¿ç”¨è™šæ‹Ÿå­—æ®µï¼‰

```graphql
query GetProductContent($sku: String!) {
  products(where: { sku: { equals: $sku } }) {
    id
    sku

    # ä½¿ç”¨è™šæ‹Ÿå­—æ®µç›´æ¥è·å–æŒ‡å®šè¯­è¨€
    contentByLocale(locale: "zh") {
      locale
      content
    }
  }
}
```

#### æŸ¥è¯¢å·²ç¿»è¯‘çš„è¯­è¨€åˆ—è¡¨

```graphql
query GetTranslatedLanguages($sku: String!) {
  products(where: { sku: { equals: $sku } }) {
    sku
    translatedLocales  # è¿”å› JSON æ•°ç»„ï¼š["en","zh","es"]
  }
}
```

---

### Next.js API èšåˆå±‚

```typescript
// web/app/api/v1/products/[sku]/route.ts
export async function GET(
  request: Request,
  { params }: { params: { sku: string } }
) {
  const locale = new URL(request.url).searchParams.get('locale') || 'en'

  const { data } = await keystoneClient.query({
    query: gql`
      query GetProduct($sku: String!, $locale: String!) {
        products(where: { sku: { equals: $sku } }) {
          id
          sku
          name
          shortDescription

          # ä½¿ç”¨è™šæ‹Ÿå­—æ®µè·å–å½“å‰è¯­è¨€çš„å†…å®¹
          contentByLocale(locale: $locale) {
            locale
            content
          }
        }
      }
    `,
    variables: { sku: params.sku, locale }
  })

  const product = data.products[0]

  // è§£æ JSON å­—æ®µ
  const nameData = JSON.parse(product.name || '{}')
  const descData = JSON.parse(product.shortDescription || '{}')

  return Response.json({
    id: product.id,
    sku: product.sku,
    name: nameData[locale] || nameData.en,
    shortDescription: descData[locale] || descData.en,
    content: product.contentByLocale?.content || null,
  })
}
```

---

### æ•°æ®åº“ç»“æ„

#### Product è¡¨

```sql
CREATE TABLE "Product" (
  id UUID PRIMARY KEY,
  sku TEXT UNIQUE,
  name JSONB,              -- JSON æ–¹æ¡ˆï¼š{"en":"...","zh":"..."}
  "shortDescription" JSONB, -- JSON æ–¹æ¡ˆ
  status TEXT,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

#### ProductContentTranslation è¡¨

```sql
CREATE TABLE "ProductContentTranslation" (
  id UUID PRIMARY KEY,
  locale TEXT NOT NULL,
  content JSONB NOT NULL,  -- Document ç»“æ„
  product_id UUID REFERENCES "Product"(id) ON DELETE CASCADE,
  created_at TIMESTAMP,
  updated_at TIMESTAMP,

  -- å”¯ä¸€çº¦æŸï¼šæ¯ä¸ªäº§å“çš„æ¯ä¸ªè¯­è¨€åªèƒ½æœ‰ä¸€æ¡è®°å½•
  UNIQUE(product_id, locale)
);

-- ç´¢å¼•ä¼˜åŒ–
CREATE INDEX idx_content_translation_product ON "ProductContentTranslation"(product_id);
CREATE INDEX idx_content_translation_locale ON "ProductContentTranslation"(locale);
```

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

### éœ€è¦åˆ›å»ºçš„æ–‡ä»¶

```
cms/
â”œâ”€â”€ custom-fields/
â”‚   â”œâ”€â”€ MultilingualJSONField.tsx              # å•è¡Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆJSON æ–¹æ¡ˆï¼‰
â”‚   â”œâ”€â”€ MultilingualJSONDocumentField.tsx      # ç®€åŒ–å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆJSON æ–¹æ¡ˆï¼‰
â”‚   â”œâ”€â”€ LocaleSelectField.tsx                  # è¯­è¨€é€‰æ‹©å™¨ï¼ˆå…³ç³»è¡¨æ–¹æ¡ˆï¼‰
â”‚   â”œâ”€â”€ DocumentEditorWithTranslation.tsx      # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå…³ç³»è¡¨æ–¹æ¡ˆï¼‰
â”‚   â””â”€â”€ TranslatedLocalesDisplay.tsx           # å·²ç¿»è¯‘è¯­è¨€æ˜¾ç¤ºç»„ä»¶
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ Product.ts                             # ä¸»è¡¨
â”‚   â”œâ”€â”€ ProductContentTranslation.ts           # ç¿»è¯‘è¡¨
â”‚   â”œâ”€â”€ ProductSeries.ts                       # ä¸»è¡¨
â”‚   â””â”€â”€ ProductSeriesContentTranslation.ts     # ç¿»è¯‘è¡¨
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ translation/
â”‚       â””â”€â”€ translate.ts                       # AI ç¿»è¯‘æœåŠ¡
â””â”€â”€ constants/
    â””â”€â”€ language.ts                            # è¯­è¨€å¸¸é‡å®šä¹‰

web/
â””â”€â”€ lib/
    â””â”€â”€ types/
        â””â”€â”€ multilingual.ts                    # TypeScript ç±»å‹å®šä¹‰
```

### å¸¸é‡å®šä¹‰ç¤ºä¾‹

```typescript
// cms/constants/language.ts
export const SUPPORTED_LANGUAGES = [
  'en', 'zh', 'es', 'fr', 'de', 'it', 'pt', 'nl', 
  'sv', 'da', 'no', 'fi', 'is', 'cs', 'hu', 'pl', 
  'sk', 'ar', 'he', 'fa', 'tr', 'az', 'ber', 'ku'
] as const

export type LanguageCode = typeof SUPPORTED_LANGUAGES[number]

export const LANGUAGE_NAMES: Record<LanguageCode, string> = {
  en: 'English',
  zh: 'ä¸­æ–‡',
  es: 'EspaÃ±ol',
  fr: 'FranÃ§ais',
  de: 'Deutsch',
  it: 'Italiano',
  pt: 'PortuguÃªs',
  nl: 'Nederlands',
  sv: 'Svenska',
  da: 'Dansk',
  no: 'Norsk',
  fi: 'Suomi',
  is: 'Ãslenska',
  cs: 'ÄŒeÅ¡tina',
  hu: 'Magyar',
  pl: 'Polski',
  sk: 'SlovenÄina',
  ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
  he: '×¢×‘×¨×™×ª',
  fa: 'ÙØ§Ø±Ø³ÛŒ',
  tr: 'TÃ¼rkÃ§e',
  az: 'AzÉ™rbaycan',
  ber: 'Tamazight',
  ku: 'KurdÃ®',
}

export const LANGUAGE_FLAGS: Record<LanguageCode, string> = {
  en: 'ğŸ‡¬ğŸ‡§',
  zh: 'ğŸ‡¨ğŸ‡³',
  es: 'ğŸ‡ªğŸ‡¸',
  fr: 'ğŸ‡«ğŸ‡·',
  // ... å…¶ä»–è¯­è¨€çš„æ——å¸œ emoji
}
```

---

## âœ… éªŒæ”¶æ¸…å•

å®ç°å¤šè¯­è¨€åŠŸèƒ½æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

### JSON æ–¹æ¡ˆï¼ˆçŸ­æ–‡æœ¬å­—æ®µï¼‰
- [ ] æ‰€æœ‰çŸ­æ–‡æœ¬å­—æ®µä½¿ç”¨ JSON æ ¼å¼å­˜å‚¨ï¼ˆname, title, shortDescriptionï¼‰
- [ ] è‡ªå®šä¹‰ç¼–è¾‘å™¨ç»„ä»¶å·²åˆ›å»ºï¼ˆMultilingualJSONField, MultilingualJSONDocumentFieldï¼‰
- [ ] 24 ç§è¯­è¨€æ ‡ç­¾é¡µæ­£å¸¸å·¥ä½œ
- [ ] AI ç¿»è¯‘åŠŸèƒ½å¯ç”¨
- [ ] ç¼–è¾‘å™¨æ˜¾ç¤ºç¿»è¯‘å®Œæˆåº¦ç»Ÿè®¡
- [ ] æ‰€æœ‰å¿…å¡«è¯­è¨€ï¼ˆè‹±æ–‡ï¼‰æœ‰éªŒè¯

### å…³ç³»è¡¨æ–¹æ¡ˆï¼ˆå¯Œæ–‡æœ¬å†…å®¹ï¼‰
- [ ] ç¿»è¯‘è¡¨å·²åˆ›å»ºï¼ˆProductContentTranslation, ProductSeriesContentTranslationï¼‰
- [ ] ä¸»è¡¨ä¸ç¿»è¯‘è¡¨çš„ relationship æ­£ç¡®é…ç½®
- [ ] è™šæ‹Ÿå­—æ®µ `contentByLocale` å’Œ `translatedLocales` æ­£å¸¸å·¥ä½œ
- [ ] Locale å”¯ä¸€æ€§çº¦æŸç”Ÿæ•ˆï¼ˆHooks éªŒè¯ï¼‰
- [ ] LocaleSelectField è‡ªå®šä¹‰ç»„ä»¶å·²åˆ›å»ºï¼Œå¯è‡ªåŠ¨ç¦ç”¨å·²ä½¿ç”¨çš„è¯­è¨€
- [ ] DocumentEditorWithTranslation ç¼–è¾‘å™¨æ­£å¸¸å·¥ä½œ
- [ ] ç¿»è¯‘è¡¨åœ¨ä¸»èœå•ä¸­éšè—ï¼ˆisHidden: trueï¼‰
- [ ] CASCADE åˆ é™¤é…ç½®æ­£ç¡®

### é€šç”¨è¦æ±‚
- [ ] GraphQL API è¿”å›æ­£ç¡®çš„æ•°æ®æ ¼å¼
- [ ] Next.js API å±‚æ­£ç¡®è§£æå’Œè½¬æ¢ä¸¤ç§æ–¹æ¡ˆçš„æ•°æ®
- [ ] TypeScript ç±»å‹å®šä¹‰å®Œæ•´
- [ ] æ•°æ®åº“ç´¢å¼•å·²åˆ›å»ºï¼ˆJSON GIN ç´¢å¼•ã€ç¿»è¯‘è¡¨å¤–é”®ç´¢å¼•ï¼‰

---

**è¿”å›**: [README.md](./README.md) | **ä¸‹ä¸€æ­¥**: [03-æ ¸å¿ƒæ•°æ®æ¨¡å‹.md](./03-æ ¸å¿ƒæ•°æ®æ¨¡å‹.md)